{% extends 'base_manager.html' %}

{% block title %}Revenue{% endblock %}

{% block content %}
{% if noData == True %}
    <h1>No Revenue Data</h1>

{% else %}
    <div class="chart-container">
        <h1>Future Revenue Estimates</h1>
        <!-- chart of future revenue estimates -->
        <canvas id="myChart"></canvas>

        <div id="revenueEstimates">
            <!-- Get actual total value from past data from DB -->
            <h2>Revenue Estimates</h2>
            <p>Current Compound Weekly Growth Rate: {{ CWGR }}</p> 
            <p>This is what the future revenue is based on</p>
        </div>

        <div class="change_start_rev">
            <h1>Change Revenue</h1>
            <form action="" method="post" name="changeRev">
            {{ ChangeStartRevForm.hidden_tag() }}
              
            {{ ChangeStartRevForm.newRev(placeholder="Â£") }}
            {{ ChangeStartRevForm.submitRev }}

        </div>

    </div>



    <!-- chart script -->
    <script nonce="{{ csp_nonce() }}">
        const labels = {{ labels | tojson }};

        const data = {
        labels: labels,
        datasets: [
            {
                label: 'Estimated Revenue',
                // sets colour of the line, change both for colour change
                backgroundColor: 'rgb(100, 99, 132)',
                borderColor: 'rgb(100, 99, 132)',
                data: {{ revData | tojson }},
            },
            {
                label: 'Estimated Customers',
                // sets colour of the line, change both for colour change
                backgroundColor: 'rgb(200, 99, 132)',
                borderColor: 'rgb(200, 99, 132)',
                data: {{ customerData | tojson }},
            }
        ]
        };

        const config = {
        type: 'line',
        data: data,
        options: { maintainAspectRatio: false }
        };

        const myChart = new Chart(
        document.getElementById('myChart'),
        config
        );
    </script>

{% endif %}
{% endblock %}
