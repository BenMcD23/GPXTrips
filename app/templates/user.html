<!-- Content for post-login view of a user -->
{% extends 'base_post_login.html' %}

{% block title %}User Home{% endblock %}

{% block content %}
    <h2>Main Content Area for User Home</h2>
    <head>
        <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    </head>

    <div style="margin-bottom: 20px;">
        <h3>Uploaded GPX Files</h3>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>File Name</th>
                    <th>Upload Date</th>
                    <th>Display on Map</th> <!-- Checkbox (View in Map) -->
                    <th>Public</th> <!-- Checkbox (Visible to friends?) -->
                </tr>
            </thead>
            <tbody>
                <!-- Backend Data (for loop)-->
                <tr>
                    <td>example.gpx</td>
                    <td>2024-02-17</td>
                    <td>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="displayCheckbox1">
                            <label class="form-check-label" for="displayCheckbox1">
                                Show on Map?
                            </label>
                        </div>
                    </td>
                    <td>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="publicCheckbox1">
                            <label class="form-check-label" for="publicCheckbox1">
                                Public
                            </label>
                        </div>
                    </td>
                </tr>
                <!-- for loop? -->
            </tbody>
        </table>
    </div>
    

    <!-- Add Friends and View Their Trips Section (Acessibility To be considered)-->
    <div style="margin-bottom: 20px;">
        <h3>Friends and Their Trips</h3>
        <!-- Form to add friends -->
        <form action="/add_friend" method="post">
            <div class="form-group">
                <label for="friendEmail">Friend's Email:</label>
                <input type="email" class="form-control" id="friendEmail" name="friend_email">
            </div>
            

            <button type="submit" id="addFriendButton" class="btn btn-primary" name="addFriendButton">Add Friend</button>



        </form>
        <!-- Display list of friends and their trips -->
        <ul class="list-group">
            <li class="list-group-item">
                Friend 1
                <button type="button" class="btn btn-link float-right">View Trips</button> <!-- Upon clicking view trips show the trips on a pop-up map? -->
            </li>
            <li class="list-group-item">
                Friend 2
                <button type="button" class="btn btn-link float-right">View Trips</button>
            </li>
            <!-- For loop to display all friends OK-->
        </ul>
    </div>

    <body>
        <!-- Plug In application function to upload GPX File.(DB Storagte As Well?) -->
        <div id="map"></div>
        <form action="/upload" method="post" enctype="multipart/form-data">
            <input type="file" id="file" name="file">
            <label for="file">Select File:</label>
            <button type="submit">Upload GPX</button>


        </form>
        <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
        <script>
            // for adding the route onto the map
            new L.GPX(gpxConvert('{{ route }}'), {
              async: true,
              marker_options: {
                startIconUrl: 'static/pinstart.png',
                endIconUrl:   'static/pinend.png',
                shadowUrl: null,
              },
            }).on('loaded', function(e) {
              var gpx = e.target;
              map.fitBounds(gpx.getBounds());
              control.addOverlay(gpx, gpx.get_name());
          }).addTo(map);
        </script>
        <div class="form">
            <form method="POST" action="" name="fileUpload" enctype="multipart/form-data">
                {{ FileUploadForm.hidden_tag() }}
                <label for="fileUpload">File Upload</label>
      
                {{ FileUploadForm.file_upload(accept=".gpx") }}
                {{ FileUploadForm.submit_file }}
            </form>
        </div>
    </body>
{% endblock %}

