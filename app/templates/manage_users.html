{% extends 'base_manager.html' %}

{% block title %}Manage Users{% endblock %}

{% block content %}

<h2>Customer Information</h2>

<!-- This page will allow you to view and manage registered users. You can enable or disable their accounts. -->

<table>
  <tr>
    <th>Name</th>
    <th>Surname</th>
    <th>Email Address</th>
    <th>Membership</th>
    <th>Action</th>
  </tr>
  {% for user in all_users %}
  <tr>
    <td>{{ user.first_name }}</td>
    <td>{{ user.last_name }}</td>
    <td>{{ user.email }}</td>
    <td>{{ user.subscription_id }}</td>
    <td>
        {% if user.enabled %}
            <button class="disabled" onclick="toggleAccount('{{ user.id }}', false)" >Disabled</button>
        {% else %}
            <button class="enabled" onclick="toggleAccount('{{ user.id }}', true)">Enabled</button>
        {% endif %}
    </td>
  </tr>
  {% endfor %}
</table>

<script>
function toggleAccount(userId, enable) {
//AJAX CODE NECESSARY TO MAKE THE CHANGE ON THE DB ... TO BE COMPLETED
//This action would toggle beween enabling and disabling the account

    if (enable) {
        alert('Enabling account with ID ' + customerId);
    } else {
        alert('Disabling account with ID ' + customerId);
    }
}

</script>


{% endblock %}